
# 要件定義書 v3.1

**Version:** 3.1 (PoC Emphasis)
**Scope:** 展示会向けデモアプリケーション開発

## 1. 開発フェーズ定義 (PoC First)

本開発に先立ち、AIモデル（Gemini Nano等）の技術検証を行う。実験の結果によって実装機能を決定する。

* **Success:** 実用的な速度・精度が出た場合、Adaptive Strategy（Nano/Cloud併用）を実装する。
* **Fail:** 動作不安定または精度不足の場合、Nanoの実装は見送り、Cloud API単独またはルールベース処理に切り替える。

## 2. 機能要件

### (1) ユーザーインターフェース (UI)

| 画面モード            | 要件詳細                                                           |
| --------------------- | ------------------------------------------------------------------ |
| **Simple Mode** | ファイル選択と実行ボタンのみ。AIの状態に関わらず常に動作すること。 |
| **Geek Mode**   | 詳細パラメータ、ログ、ダッシュボードを表示する拡張画面。           |

### (2) AI制御 & 自己修復 (条件付き実装)

**実装条件: 事前実験にて動作確認済みであること**

* **Adaptive Strategy:**
  * Gemini Nano有効時: 安全なJSON生成（テンプレート適用）。
  * Cloud/High-End有効時: 生のFFmpegコマンド生成とSelf-Healing（エラー修正）の実演。
* **Fallback:** AIが使用できない、または実験で不採用となった場合、ハードコードされた「推奨プリセット（松竹梅）」を使用するロジックを用意する。

### (3) Geek Dashboard (可視化)

* **Stats:** 圧縮率、ビットレート推移グラフ。
* **AI Monitor:** AI実装時のみ、推論速度やメモリを表示。非実装時は非表示とする。

### (4) エクスポート (The Souvenir)

* **QR Code & Notebook:**
* 成功した処理内容をPython Notebook化し、Litterbox APIへアップロード。
* URLをQRコードで表示。これはAIの有無に関わらず実装する（FFmpegのコマンドさえあれば生成可能なため）。

## 3. 非機能要件

* **Fail-Safe:** 実験的なAI機能がブラウザをクラッシュさせないよう、Worker分離やメモリ監視を徹底する。
* **Flexibility:** AI機能が全滅しても、「動画変換ツール」としての基本機能は維持する。
