# ブラウザ完結型動画エンコードアプリ

WebCodecs APIを活用した、完全クライアントサイドで動作する動画エンコードWebアプリケーションです。
サーバー負荷ゼロ・プライバシー保護を実現し、エンコードが可能です。

## 🚀 稼働サイト

<https://shimamura-kouki.github.io/2nd_IT-Project_BrowserVideoEncoding/>

> **⚠️ 重要な変更**: 2026年2月以降のビルドでは、内部パスが絶対パスから相対パスに変更されました。それ以前にビルドされたファイル（絶対パス `/2nd_IT-Project_BrowserVideoEncoding/` を使用）は、GitHub Pages以外の環境で正しく動作しない可能性があります。最新のビルドをご利用ください。

## 🌐 ブラウザ対応状況

### ✅ 推奨ブラウザ

- **Google Chrome** 94以上 ⭐ 推奨（動作確認済み）
- **Microsoft Edge** 94以上 ⭐ 推奨
- **Brave**、**Vivaldi** 等の Chromium系ブラウザ

### ⚠️ 非推奨ブラウザ

- **Firefox**: WebCodecs API の実装に問題があり、AV1・VP9コーデックでエンコードが100%完了しない既知の問題があります。使用は推奨しません。

- **Safari**:  WebCodecs API対応ですが、既知の問題があります
  - 音声エンコーダーの起動に失敗する場合がある
  - 特定のコーデックがサポートされていない
  - エンコード処理が不安定で、エラーが発生する可能性
  - ファイルの読み込みに問題が発生する場合がある

### 🧪 動作検証済みプラットフォーム

以下のプラットフォームで動作検証を実施しています：

- **Windows**
  - Google Chrome
  - Firefox（非推奨：既知の問題あり）
- **Android**
  - Google Chrome
- **iPad**
  - Safari（非推奨：既知の問題あり）
- **Ubuntu**
  - Google Chrome(非推奨：調査中のエラーにより正常にエンコードが始まらない)

> **注意**: 上記以外のプラットフォーム・ブラウザでも動作する可能性がありますが、動作保証はありません。

> **重要**: 最適な体験のため、Google ChromeまたはMicrosoft Edgeの最新版をご使用ください。

## 📚 ドキュメント

### プロジェクト資料（設計当初の情報）

- 企画書 → [企画書mk3-α.md](企画書mk3-α.md)
- フロントエンド設計書 → [Implementation_Spec_Frontend_Complete_v3.md](Implementation_Spec_Frontend_Complete_v3.md)
- バックエンド設計書 → [Implementation_Spec_Backend_Complete.md](Implementation_Spec_Backend_Complete.md)

**重要**: 上記の設計書は開発初期段階で作成されたものです。**実際の実装は時間不足のため途中でバックエンド不要に変更されました**。バックエンドも実装されているバージョンはレガシーのブランチを参照してください。実際の実装内容については、プログラム実装ガイドを参照してください。

### 開発者向け

- **プログラム実装ガイド** → [video-encoder-app/frontend/README.md](video-encoder-app/frontend/README.md)
  - ローカル開発環境のセットアップ
  - 技術スタック詳細
  - アーキテクチャ説明
  - トラブルシューティング

## ✨ 主な機能

### コア機能
- **完全クライアントサイド処理**: 動画データをサーバーに送信せず、ブラウザ内で完結
- **高速エンコード**: WebCodecs APIによるハードウェアアクセラレーション活用
- **大容量対応**: FileSystem Access APIによるストリーム書き込みでメモリ効率化
- **詳細な進捗表示**: ファイル読み込み・エンコード処理を分けて表示（Android対応）
- **8K動画入力対応**: 最大8K (7680x4320) までの高解像度動画の入力に対応

### 入力形式

#### 対応コンテナ形式

- **MP4形式** (.mp4, .m4v) ⭐ 推奨
  - 映像: H.264 (AVC), H.265 (HEVC), AV1
  - 音声: AAC (LC, HE, HE v2)
  - 最大解像度: 8K (7680x4320)
- **MOV形式** (.mov, QuickTime)
  - 映像: H.264 (AVC), H.265 (HEVC), AV1
  - 音声: AAC (LC, HE, HE v2)
  - 最大解像度: 8K (7680x4320)

> **注意**: WebM形式はサポートされていません。WebMファイルをエンコードする場合は、FFmpegなどで事前にMP4/MOV形式に変換してください。

#### ファイル選択方法

- **クリックして選択**: ファイルピッカーから動画ファイルを選択
- **ドラッグ&ドロップ**: ブラウザ画面に動画ファイルを直接ドロップ

どちらの方法でも、MP4/MOV形式のファイルのみ読み込まれます。対応していない形式の場合は、エラーメッセージが表示されます。

### エンコード設定

#### 品質制御モード
- **QP（量子化パラメータ）モード**: 一定の品質を保つ高度な制御方式（デフォルト、推奨）
  - QP値: 18（最高）～ 38（最低）の範囲で調整可能
  - ファイルサイズが変動しても品質が一定
- **VBR（可変ビットレート）モード**: 従来型のビットレート指定方式
- **CBR（固定ビットレート）モード**: ストリーミング用の固定レート方式

#### ビデオコーデック
- **H.264 (AVC)**: 最も互換性の高いコーデック（推奨）
- **H.265 (HEVC)**: H.264より高圧縮率
- **VP8**: WebM用の基本コーデック（レガシー）
- **VP9**: 高効率なWebMコーデック
- **AV1**: 次世代の超高効率コーデック（エンコード時間長め）

#### オーディオコーデック
- **AAC-LC**: 最も互換性の高い音声コーデック（MP4推奨）
- **AAC-HE / AAC-HE v2**: 低ビットレート向けAACプロファイル（諸事情により当アプリでの存在感薄め）
- **Opus**: 高品質・低遅延のWebM用コーデック

#### 解像度設定
- **プリセット**: 4K (2160p)、1440p、1080p、720p、480pなど
- **手動設定**: 幅と高さを個別に指定
- **幅のみ指定**: 高さを自動計算（アスペクト比維持）
- **高さのみ指定**: 幅を自動計算（アスペクト比維持）
- **元ファイル維持**: 入力動画の解像度をそのまま使用

#### その他の設定
- **フレームレート**: 元ファイル維持 / 手動指定（30fps、60fpsなど）
- **品質プリセット**: 5段階（最高、高、中、低、最低）+ カスタム値指定
- **エンコード設定プリセット**: QP高品質、VBR 4K/1080p/720pなど複数の組み込みプリセット
- **ダーク/ライトテーマ**: 画面の配色を切り替え可能
